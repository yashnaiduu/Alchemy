<div class="relative min-h-screen">
    <!-- Background Decor -->
    <div
        class="absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-primary-500/10 rounded-full blur-3xl opacity-50 animate-pulse pointer-events-none">
    </div>
    <div
        class="absolute bottom-0 left-0 -ml-20 -mb-20 w-80 h-80 bg-surface-500/10 rounded-full blur-3xl opacity-50 pointer-events-none">
    </div>

    <!-- Content -->
    <div class="relative z-10 flex flex-col gap-8 pb-20">
        <!-- Header -->
        <div class="flex flex-col gap-4 text-center sm:text-left animate-slide-up">
            <h1 class="text-4xl sm:text-5xl font-bold text-surface-900 dark:text-surface-0 leading-tight">
                {{browse() ? 'Discover' : 'Your'}} <span class="text-primary">{{browse() ? 'Recipes' :
                    'Favourites'}}</span>
            </h1>
            <p class="text-xl text-surface-600 dark:text-surface-400 max-w-2xl">
                Curated cocktails for the modern mixologist.
            </p>
        </div>

        <!-- Search Bar -->
        <div class="relative group animate-slide-up delay-100">
            <span
                class="material-symbols-rounded absolute left-5 top-1/2 -translate-y-1/2 text-surface-400 dark:text-surface-500 group-focus-within:text-primary transition-colors text-2xl">search</span>
            <input type="text" pInputText [ngModel]="searchValue()" (ngModelChange)="searchValue.set($event)"
                placeholder="Search recipes, ingredients..."
                class="w-full! pl-14! pr-14! py-4! rounded-2xl! bg-surface-0/50 dark:bg-surface-900/50 backdrop-blur-md border border-surface-200 dark:border-surface-700 shadow-sm hover:shadow-lg focus:shadow-xl transition-all text-lg" />
            @if (searchValue()) {
            <button (click)="searchValue.set('')"
                class="absolute right-4 top-1/2 -translate-y-1/2 text-surface-400 hover:text-surface-600 dark:hover:text-surface-200 bg-transparent border-none p-1 cursor-pointer flex items-center justify-center rounded-full hover:bg-surface-200 dark:hover:bg-surface-700 transition-colors">
                <span class="material-symbols-rounded text-xl">close</span>
            </button>
            }
        </div>

        <!-- Spirit Filters -->
        <div class="flex items-center gap-3 overflow-x-auto pb-4 scrollbar-none mx-1 px-1 animate-slide-up delay-200">
            <p-button (click)="selectedSpirit.set('All')" label="All" [rounded]="true" size="small"
                styleClass="whitespace-nowrap hover:scale-105 transition-transform font-medium px-4 py-2"
                [severity]="selectedSpirit() === 'All' ? 'primary' : 'secondary'"
                [outlined]="selectedSpirit() !== 'All'"></p-button>

            @for (spirit of spirits(); track spirit) {
            <p-button (click)="selectedSpirit.set(selectedSpirit() === spirit ? 'All' : spirit)" [rounded]="true"
                size="small"
                styleClass="whitespace-nowrap hover:scale-105 transition-transform flex items-center gap-2 font-medium px-4 py-2"
                [severity]="selectedSpirit() === spirit ? 'primary' : 'secondary'"
                [outlined]="selectedSpirit() !== spirit">
                <span class="flex items-center gap-2">
                    {{spirit}}
                    @if (selectedSpirit() === spirit) {
                    <span class="material-symbols-rounded text-base font-bold">close</span>
                    }
                </span>
            </p-button>
            }
        </div>

        <!-- Results Count -->
        @if (cocktails().length > 0) {
        <div class="text-sm font-medium text-surface-500 dark:text-surface-400 animate-fade-in pl-1">
            Found {{cocktails().length}} {{cocktails().length === 1 ? 'recipe' : 'recipes'}}
        </div>
        }

        <!-- Cocktails Grid -->
        @if (cocktails().length > 0) {
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 gap-6 animate-slide-up delay-300">
            @for (item of cocktails(); track item.id) {
            <app-cocktail [cocktail]="item" (onOpen)="goToDetails(item.id)" [saved]="saved().has(item.id)"
                (onSave)="save(item.id)">
            </app-cocktail>
            }
        </div>
        } @else {
        <!-- Empty State -->
        <div class="flex flex-col items-center justify-center py-24 px-4 text-center animate-fade-in">
            <div
                class="w-32 h-32 rounded-3xl bg-surface-0/50 dark:bg-surface-800/50 backdrop-blur-sm border border-surface-200 dark:border-surface-700 flex items-center justify-center mb-8 shadow-inner">
                <span class="material-symbols-rounded text-6xl text-surface-400 dark:text-surface-500">search_off</span>
            </div>
            <h3 class="text-2xl font-bold text-surface-900 dark:text-surface-0 mb-3">
                {{browse() ? 'No recipes found' : 'No favourites yet'}}
            </h3>
            <p class="text-lg text-surface-600 dark:text-surface-400 max-w-md">
                @if (browse()) {
                Try adjusting your search terms or browse all recipes.
                } @else {
                Start saving your favourite cocktails to see them here.
                }
            </p>
        </div>
        }
    </div>
</div>